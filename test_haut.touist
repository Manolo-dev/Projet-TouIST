
$C=[vert, orange, bleu, rouge, rose, vide]
$T=3
$k=1 ;; because trust me
$ETAPES=[0..$k]

;; 1 is for the first tube

p(0, 1, 1, vert) ;; the first tube, first layer is green
p(0, 1, 2, orange) ;; the first tube, second layer is orange
p(0, 1, 3, vert) ;; the first tube, third layer is green
p(0, 1, 4, orange) ;; the first tube, fourth layer is orange

;; end init of the first tube
;; so it's look like this
;; tube 1
;; | orange |
;; |  vert  |
;; | orange |
;; |  vert  |
;; \________/

;; 2 is for the second tube

p(0, 2, 1, orange) ;; the second tube, first layer is orange
p(0, 2, 2, vert) ;; the second tube, second layer is green
p(0, 2, 3, orange) ;; the second tube, third layer is orange
p(0, 2, 4, vert) ;; the second tube, fourth layer is green

;; end init of the second tube
;; so it's look like this
;; tube 2
;; |  vert  |
;; | orange |
;; |  vert  |
;; | orange |
;; \________/

;; 3 is for the third tube
p(0, 3, 1, vide) ;; the third tube, first layer is empty
p(0, 3, 2, vide) ;; the third tube, second layer is empty
p(0, 3, 3, vide) ;; the third tube, third layer is empty
p(0, 3, 4, vide) ;; the third tube, fourth layer is empty

;; end init of the third tube
;; so it's look like this
;; tube 3
;; |        |
;; |        |
;; |        |
;; |        |
;; \________/



;; is in top
bigand $i in $ETAPES: ;; for each step
    bigand $t in [1..$T]: ;; for each tube
        t_est_tout_haut($i, $t, 4)
    end
end

bigand $i in $ETAPES: ;; for each step
    bigand $t in [1..$T]: ;; for each tube
        bigand $e in [1..3]: ;; for each layer
            bigand $c in $C: ;; for each color
                (p($i, $t, $e, $c) and p($i, $t, $e+1, vide)) => t_est_vide_dessus($i, $t, $e) ;; if a state, a tube, a layer have a color and the layer above it is empty, then the color is in the top of the tube
            end
        end
    end
end

bigand $i in $ETAPES: ;; for each step
    bigand $t in [1..$T]: ;; for each tube
        bigand $e in [1..3]: ;; for each layer
            t_est_tout_haut($i, $t, $e) or t_est_vide_dessus($i, $t, $e) => est_haut($i, $t, $e) ;; if a state, a tube, a layer is in the top of the tube or the layer above it is empty, then the color is in the top of the tube
        end
    end
end


bigand $i in $ETAPES:
    bigand $t in [1..$T]:
        bigand $e in [1..4]:
            bigor $c in $C when $c !=vide:
                est_haut($i,$t,$e) => p($i,$t,$e,$c) and p($i+1,$t,$e,vide) and p($i+1,3,1,$c)
            end
        end
    end
end